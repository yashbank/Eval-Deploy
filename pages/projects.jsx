import Head from "next/head";
import Link from "next/link";
import React from "react";

const Projects = ({ repo }) => {
  return (
    <>
      <Head>
        <title>Yash Bankar - Projects</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <div
        style={{
          display: "grid",
          gridTemplateColumns: "1fr 1fr",
          gap: "15px",
          padding: "2%",
          marginTop: "0",
        }}
      >
        {repo.items.map((el) => {
          return (
            <Link key={el.id} href={el.html_url}>
              <div
                style={{
                  border: "2px solid grey",
                  width: "100%",
                  padding: "5%",
                  borderTopLeftRadius: "20px",
                  borderBottomRightRadius: "20px",
                  margin: "1%",
                }}
              >
                <h1
                  style={{
                    margin: "1%",
                  }}
                >
                  {el.name}
                </h1>
                <h3>{el.description}</h3>
                <div
                  style={{
                    display: "flex",
                    justifyContent: "space-between",
                    marginTop: "2%",
                    marginBottom: "2%",
                    alignItems: "center",
                  }}
                >
                  <div
                    style={{
                      display: "flex",
                      justifyContent: "center",
                      alignItems: "center",
                      width: "60%",
                    }}
                  >
                    <h2>
                      <img
                        style={{
                          width: "10%",
                        }}
                        src="https://www.freepnglogos.com/uploads/star-png/star-vector-png-transparent-image-pngpix-21.png"
                        alt="star"
                      />{" "}
                      {el.stargazers_count}
                    </h2>
                    <h2
                      style={{
                        display: "flex",
                        justifyContent: "space-between",
                      }}
                    >
                      <img
                        style={{
                          width: "130%",
                        }}
                        src="https://cdn.iconscout.com/icon/premium/png-128-thumb/forked-4699913-3897730.png"
                      />{" "}
                      {el.forks_count}
                    </h2>
                  </div>
                  <div>
                    <h2>{el.language}</h2>
                  </div>
                </div>
              </div>
            </Link>
          );
        })}
      </div>
    </>
  );
};

export default Projects;

export async function getStaticProps() {
  let r = await fetch(
    "https://api.github.com/search/repositories?q=user:yashbank+fork:true&sort=updated&per_page=10&type=Repositories"
  );
  let rep = await r.json();
  console.log(rep);
  return {
    props: {
      repo: rep,
    }, // will be passed to the page component as props
  };
}
